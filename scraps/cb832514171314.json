{
  "title": "mycliを導入してターミナルで気楽にMariaDB/MySQLを触ってみる(補足説明付)",
  "closed": false,
  "archived": false,
  "created_at": "2020-12-09",
  "comments": [
    {
      "author": "kumamoto",
      "created_at": "2020-12-09",
      "body_markdown": "![](https://storage.googleapis.com/zenn-user-upload/4ffe62le4g1poff9fisknob5ehpy)\n\n# 前提 本記事が想定している対象読者さんなど\n- MariaDB(or MySQL)を導入済みであること。\nまだ導入してないよーという方は、筆者の『[[MAMP/XAMPPを使わず]HomebrewでローカルにPHP/Apache/MariaDB(mysql)の環境構築をする](https://qiita.com/digitalhimiko/items/438fb17706873b476040#mariadbmysql%E3%82%92%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B)』のMariaDB部分を参考にしてみてください。\n\n- なんとなくSQLはわかる人\n`SELECT`や`INSERT`など聞いたことはある人\n(SQLってなんだ...)というレベルの方は『[スッキリわかる SQL 入門](ZW5jcnlwdGVkUXVhbGlmaWVyPUEzNEtNTVE3Mk1PNU1NJmVuY3J5cHRlZElkPUEwODIxOTg0OFJQNTVGT0dNNzJDJmVuY3J5cHRlZEFkSWQ9QTFCWUhPV0hQTTg3N04md2lkZ2V0TmFtZT1zcF9kZXRhaWwmYWN0aW9uPWNsaWNrUmVkaXJlY3QmZG9Ob3RMb2dDbGljaz10cnVl) 』などの書籍がオススメです。\n\n- CLI(あのターミナルの黒い画面)でDBを気楽に弄ってみたい方\n本格的に大規模なDBを弄るとなると[Sequel Pro](https://www.sequelpro.com/)などのGUIを使ったほうが流石に楽かと。\n\n# 下準備 mycliをセットアップしよう\n## そもそもmycliって何？\n[mycli](https://www.mycli.net/)とは『MySQL(やMariaDB)などの一般的なDB管理システムのCLIインターフェイス』です。\n\n## で、mycliを使うと何が嬉しいの？\n補完が入るので楽にコマンドを打てる、typoが減るというのが一番良いところです。\n\n- 基本コマンドに補完が入る\n- テーブル名など補完候補が表示される\n- カラーの設定が出来て見やすい\n![](https://storage.googleapis.com/zenn-user-upload/klqkog8vnwdt2g7xyd9mc9lgoqm2)\n上記は普通のmysqlコマンド。見づらい...\n![](https://storage.googleapis.com/zenn-user-upload/5jx2x00nyyb0yip0qd9saubacaia)\nカラーがついて、候補も出るしステキ...!\n\n## mycliのインストール\n`pip`か`homebrew`を使ってインストールしていきましょう。\n```\n-- python使いなら\n$ pip install mycli\n-- Mac使ってるなら下記でもおｋ\n$ brew update\n$ brew install mycli\n```\nmycliが入ったか確認してみてください。\n```\n$ mycli --version\nVersion: 1.21.1\n```\n\n## mycliのカラーなどを設定を変更する\n設定ファイル`~/.myclirc`を[mycliの公式サイト](https://www.mycli.net/syntax)を参考に変更していきます。\n```\n# 色変更(若草色のようになります。)\nsyntax_style = native\n# キーのバインディングをviに\nkey_bindings = vi\n# 候補選択を広めに表示\nwider_completion_menu = True\n```\n",
      "body_updated_at": "2020-12-10"
    },
    {
      "author": "kumamoto",
      "created_at": "2020-12-09",
      "body_markdown": "# mycliでMariaDBをイジってみる\n\n## DBに接続する\nDBまだ作ってない、どんなDBあったけという人は、データベース名を\n省略して次の「データベース一覧を確認」をやってみましょう。\n```\n$ mycli -uユーザー名 -pパスワード データベース名\n-- 例\n$ mycli -uroot -pHOGEHOGE fuga_db\n```\n\n## データベース一覧を確認\n```\n> SHOW DATABASES;\n```\n\n## データベース作成\n```\n> CREATE DATABASE IF NOT EXISTS test;\n```\n\n## テーブル作成\n```\n-- ->はもちろん自分で書く必要ないよ\n> CREATE TABLE members (\n                        id MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,\n                        name varchar(255),\n                        index (id)\n                        );\n```\n\n## テーブルの一覧を表示\n```\n> SHOW TABLES;\n```\n\n## テーブルの構造を確認\n```\n> DESCRIBE テーブル名;\n-- 例\n> DESCRIBE members;\n```\n※参考\n『[整数型(真数値) - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT / MySQL公式](https://dev.mysql.com/doc/refman/5.6/ja/integer-types.html)』\n\n## テーブルを破棄\n```\n> DROP TABLE IF EXISTS テーブル名\nYou're about to run a destructive command.\nDo you want to proceed? (y/n): y\nYour call!\n```\n\n## indexを確認\n```\n> SHOW INDEX FROM テーブル名\n-- 例\n> SHOW INDEX FROM members\n+---------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+\n| Table   | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |\n+---------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+\n| members | 1          | id       | 1            | id          | A         | 0           | <null>   | <null> |      | BTREE      |         |               |\n+---------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+\n\n```\n上記の表示の意味は下記の通り。\n\n| 項目 | 説明 |\n| ---- | ---- | \n| Table | テーブルの名前 |\n| Non_unique | インデックスが重複を含むことができない場合は 0、できる場合は 1。  |\n| Key_name | インデックスの名前。このインデックスが主キーである場合、その名前は常に PRIMARY  |\n| Seq_in_index | インデックス内のカラムシーケンス番号であり、1 から始まる。 |\n| Column_name  | カラム名 |\n|  Collation | カラムのソート方法。MySQL では、これは「A」(昇順) またはNULL(ソートされない) のどちらかの値 |\n| Cardinality | 「あるカラムにおける、取りうる値の種類」のこと。カーディナリティー(濃度)が高いほど、MySQL が結合を実行するときにこのインデックスを使用する可能性は高くなる。 |\n| Sub_part | カラムが部分的にしかインデックス設定されていない場合は、インデックス設定された文字の数。カラム全体がインデックス設定されている場合は NULL |\n|  Packed | キーがパックされる方法を示します。パックされない場合は NULL。 |\n| Null | このカラムに NULL 値を含めることができる場合は YES が、できない場合は '' |\n| Index_type | 使用されるインデックス方法 (BTREE、FULLTEXT、HASH、RTREE) |\n| Comment | このインデックスに関する情報(インデックスが無効になっている場合の disabled など) |\n| Index_comment | インデックスが作成されたときに COMMENT 属性でインデックスに対して提供された任意のコメント |\n※参考\n『[SHOW INDEX 構文 / MySQL公式](https://dev.mysql.com/doc/refman/5.6/ja/show-index.html)』\n『[MySQL(InnoDB)でカーディナリティの低いカラムにINDEXを張る / Qiita記事](https://qiita.com/hmatsu47/items/2d44c173a9114fd06853)』\n",
      "body_updated_at": "2020-12-10"
    },
    {
      "author": "kumamoto",
      "created_at": "2020-12-09",
      "body_markdown": "## 筆者が詰まったところ\n- AUTO_INCREMENTはkeyとして設定しないといけない\nindexを貼ったり、PRIMARY KEYの設定をしてやろう\n```\n CREATE TABLE members (\n                        -> id INT NOT NULL AUTO_INCREMENT,\n                        -> name varchar(255)\n                        -> );\n(1075, 'Incorrect table definition; there can be only one auto column and it must be defined as a key')\n```\n\n## ちょっとした知識まとめ\n\n\n## 参考サイト\n[mycli公式ドキュメント](https://www.mycli.net/)\n[MyCLI – A MySQL/MariaDB Client with Auto-completion and Syntax-highlighting TecMint](https://www.tecmint.com/mycli-mysql-client-with-auto-completion-syntax-highlighting/#:~:text=MyCLI%20is%20an%20easy%2Dto,SSL%20to%20the%20MySQL%20server.)\n[mycli が便利過ぎる kakakakakku blog(個人ブログ)](https://kakakakakku.hatenablog.com/entry/2015/09/08/004426)",
      "body_updated_at": "2020-12-10"
    }
  ]
}